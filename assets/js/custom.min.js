(function(e) {
  e.fn.superfish = function(t) {
    var n = e.fn.superfish, r = n.c, i = e([ '<span class="', r.arrowClass, '"> &#187;</span>' ].join("")), s = function() {
      var t = e(this), n = u(t);
      clearTimeout(n.sfTimer);
      t.showSuperfishUl().siblings().hideSuperfishUl();
    }, o = function() {
      var t = e(this), r = u(t), i = n.op;
      clearTimeout(r.sfTimer);
      r.sfTimer = setTimeout(function() {
        i.retainPath = e.inArray(t[0], i.$path) > -1;
        t.hideSuperfishUl();
        i.$path.length && t.parents([ "li.", i.hoverClass ].join("")).length < 1 && s.call(i.$path);
      }, i.delay);
    }, u = function(e) {
      var t = e.parents([ "ul.", r.menuClass, ":first" ].join(""))[0];
      n.op = n.o[t.serial];
      return t;
    }, a = function(e) {
      e.addClass(r.anchorClass).append(i.clone());
    };
    return this.each(function() {
      var i = this.serial = n.o.length, u = e.extend({}, n.defaults, t);
      u.$path = e("li." + u.pathClass, this).slice(0, u.pathLevels).each(function() {
        e(this).addClass([ u.hoverClass, r.bcClass ].join(" ")).filter("li:has(ul)").removeClass(u.pathClass);
      });
      n.o[i] = n.op = u;
      e("li:has(ul)", this)[e.fn.hoverIntent && !u.disableHI ? "hoverIntent" : "hover"](s, o).each(function() {
        u.autoArrows && a(e(">a:first-child", this));
      }).not("." + r.bcClass).hideSuperfishUl();
      var f = e("a", this);
      f.each(function(e) {
        var t = f.eq(e).parents("li");
      });
      u.onInit.call(this);
    }).each(function() {
      var t = [ r.menuClass ];
      n.op.dropShadows && !(e.browser.msie && e.browser.version < 7) && t.push(r.shadowClass);
      e(this).addClass(t.join(" "));
    });
  };
  var t = e.fn.superfish;
  t.o = [];
  t.op = {};
  t.IE7fix = function() {
    var n = t.op;
    e.browser.msie && e.browser.version > 6 && n.dropShadows && n.animation.opacity != undefined && this.toggleClass(t.c.shadowClass + "-off");
  };
  t.c = {
    bcClass: "sf-breadcrumb",
    menuClass: "sf-js-enabled",
    anchorClass: "sf-with-ul",
    arrowClass: "sf-sub-indicator",
    shadowClass: "sf-shadow"
  };
  t.defaults = {
    hoverClass: "sfHover",
    pathClass: "overideThisToUse",
    pathLevels: 2,
    delay: 800,
    animation: {
      height: "show"
    },
    speed: "normal",
    autoArrows: !1,
    dropShadows: !1,
    disableHI: !1,
    onInit: function() {},
    onBeforeShow: function() {},
    onShow: function() {},
    onHide: function() {}
  };
  e.fn.extend({
    hideSuperfishUl: function() {
      var n = t.op, r = n.retainPath === !0 ? n.$path : "";
      n.retainPath = !1;
      var i = e([ "li.", n.hoverClass ].join(""), this).add(this).not(r).removeClass(n.hoverClass).find(">ul").hide();
      n.onHide.call(i);
      return this;
    },
    showSuperfishUl: function() {
      var e = t.op, n = t.c.shadowClass + "-off", r = this.not(".accorChild").addClass(e.hoverClass).find(">ul:hidden");
      t.IE7fix.call(r);
      e.onBeforeShow.call(r);
      r.animate(e.animation, e.speed, function() {
        t.IE7fix.call(r);
        e.onShow.call(r);
      });
      return this;
    }
  });
})(jQuery);

$(function() {
  $(".sf-menu").superfish();
})(function(e) {
  e.fn.mobileMenu = function(t) {
    var n = {
      defaultText: "Navigate to...",
      className: "select-menu",
      subMenuClass: "sub-menu",
      subMenuDash: "&ndash;"
    }, r = e.extend(n, t), i = e(this);
    this.each(function() {
      i.find("ul").addClass(r.subMenuClass);
      e("<select />", {
        "class": r.className
      }).insertAfter(i);
      e("<option />", {
        value: "#",
        text: r.defaultText
      }).appendTo("." + r.className);
      i.find("a,.separator").each(function() {
        var t = e(this), n = t.text(), i = t.parents("." + r.subMenuClass), s = i.length, o;
        if (t.parents("ul").hasClass(r.subMenuClass)) {
          o = Array(s + 1).join(r.subMenuDash);
          n = o + n;
        }
        t.is("span") ? e("<optgroup />", {
          label: n
        }).appendTo("." + r.className) : e("<option />", {
          value: this.href,
          html: n,
          selected: this.href == window.location.href
        }).appendTo("." + r.className);
      });
      e("." + r.className).change(function() {
        var t = e(this).val();
        t !== "#" && (window.location.href = e(this).val());
      });
      e(".select-menu").show();
    });
    return this;
  };
})(jQuery);

(function(e, t, n) {
  "use strict";
  var r = t.Modernizr;
  e.CBPQTRotator = function(t, n) {
    this.$el = e(n);
    this._init(t);
  };
  e.CBPQTRotator.defaults = {
    speed: 700,
    easing: "ease",
    interval: 8e3
  };
  e.CBPQTRotator.prototype = {
    _init: function(t) {
      this.options = e.extend(!0, {}, e.CBPQTRotator.defaults, t);
      this._config();
      this.$items.eq(this.current).addClass("cbp-qtcurrent");
      this.support && this._setTransition();
      this._startRotator();
    },
    _config: function() {
      this.$items = this.$el.children("div.cbp-qtcontent");
      this.itemsCount = this.$items.length;
      this.current = 0;
      this.support = r.csstransitions;
      this.support && (this.$progress = e('<span class="cbp-qtprogress"></span>').appendTo(this.$el));
    },
    _setTransition: function() {
      setTimeout(e.proxy(function() {
        this.$items.css("transition", "opacity " + this.options.speed + "ms " + this.options.easing);
      }, this), 25);
    },
    _startRotator: function() {
      this.support && this._startProgress();
      setTimeout(e.proxy(function() {
        this.support && this._resetProgress();
        this._next();
        this._startRotator();
      }, this), this.options.interval);
    },
    _next: function() {
      this.$items.eq(this.current).removeClass("cbp-qtcurrent");
      this.current = this.current < this.itemsCount - 1 ? this.current + 1 : 0;
      this.$items.eq(this.current).addClass("cbp-qtcurrent");
    },
    _startProgress: function() {
      setTimeout(e.proxy(function() {
        this.$progress.css({
          transition: "width " + this.options.interval + "ms linear",
          width: "100%"
        });
      }, this), 25);
    },
    _resetProgress: function() {
      this.$progress.css({
        transition: "none",
        width: "0%"
      });
    },
    destroy: function() {
      if (this.support) {
        this.$items.css("transition", "none");
        this.$progress.remove();
      }
      this.$items.removeClass("cbp-qtcurrent").css({
        position: "relative",
        "z-index": 100,
        "pointer-events": "auto",
        opacity: 1
      });
    }
  };
  var i = function(e) {
    t.console && t.console.error(e);
  };
  e.fn.cbpQTRotator = function(t) {
    if (typeof t == "string") {
      var n = Array.prototype.slice.call(arguments, 1);
      this.each(function() {
        var r = e.data(this, "cbpQTRotator");
        if (!r) {
          i("cannot call methods on cbpQTRotator prior to initialization; attempted to call method '" + t + "'");
          return;
        }
        if (!e.isFunction(r[t]) || t.charAt(0) === "_") {
          i("no such method '" + t + "' for cbpQTRotator instance");
          return;
        }
        r[t].apply(r, n);
      });
    } else this.each(function() {
      var n = e.data(this, "cbpQTRotator");
      n ? n._init() : n = e.data(this, "cbpQTRotator", new e.CBPQTRotator(t, this));
    });
    return this;
  };
})(jQuery, window);

$(document).ready(function() {
  $("a[class^='prettyPhoto']").prettyPhoto({
    theme: "pp_default"
  });
});

var $filterType = $("#filterOptions li.active a").attr("class"), $holder = $("ul.holder"), $data = $holder.clone();

$("#filterOptions li a").click(function(e) {
  $("#filterOptions li").removeClass("active");
  var t = $(this).attr("class");
  $(this).parent().addClass("active");
  if (t == "all") var n = $data.find("li"); else var n = $data.find("li[data-type~=" + t + "]");
  $holder.quicksand(n, {
    duration: 800,
    easing: "easeInOutQuad"
  }, function() {
    callprettyPhoto();
    galleryHover();
  });
  return !1;
});

$(".message-box").find(".closemsg").click(function() {
  $(this).parent(".message-box").slideUp(500);
});

(function(e) {
  var t = e(window), n = t.height();
  t.resize(function() {
    n = t.height();
  });
  e.fn.parallax = function(r, i, s) {
    function l() {
      var s = t.scrollTop();
      o.each(function() {
        var t = e(this), f = t.offset().top, l = u(t);
        if (f + l < s || f > s + n) return;
        o.css("backgroundPosition", r + " " + Math.round((a - s) * i) + "px");
      });
    }
    var o = e(this), u, a, f = 0;
    o.each(function() {
      a = o.offset().top;
    });
    s ? u = function(e) {
      return e.outerHeight(!0);
    } : u = function(e) {
      return e.height();
    };
    if (arguments.length < 1 || r === null) r = "50%";
    if (arguments.length < 2 || i === null) i = .1;
    if (arguments.length < 3 || s === null) s = !0;
    t.bind("scroll", l).resize(l);
    l();
  };
})(jQuery);

(function(e) {
  function r(t, n, r) {
    var i = n.hash.slice(1), s = document.getElementById(i) || document.getElementsByName(i)[0];
    if (!s) return;
    t && t.preventDefault();
    var o = e(r.target);
    if (r.lock && o.is(":animated") || r.onBefore && r.onBefore.call(r, t, s, o) === !1) return;
    r.stop && o.stop(!0);
    if (r.hash) {
      var u = s.id == i ? "id" : "name", a = e("<a> </a>").attr(u, i).css({
        position: "absolute",
        top: e(window).scrollTop(),
        left: e(window).scrollLeft()
      });
      s[u] = "";
      e("body").prepend(a);
      location = n.hash;
      a.remove();
      s[u] = i;
    }
    o.scrollTo(s, r).trigger("notify.serialScroll", [ s ]);
  }
  var t = location.href.replace(/#.*/, ""), n = e.localScroll = function(t) {
    e("body").localScroll(t);
  };
  n.defaults = {
    duration: 1e3,
    axis: "y",
    event: "click",
    stop: !0,
    target: window,
    reset: !0
  };
  n.hash = function(t) {
    if (location.hash) {
      t = e.extend({}, n.defaults, t);
      t.hash = !1;
      if (t.reset) {
        var s = t.duration;
        delete t.duration;
        e(t.target).scrollTo(0, t);
        t.duration = s;
      }
      r(0, location, t);
    }
  };
  e.fn.localScroll = function(s) {
    function o() {
      return !!this.href && !!this.hash && this.href.replace(this.hash, "") == t && (!s.filter || e(this).is(s.filter));
    }
    s = e.extend({}, n.defaults, s);
    return s.lazy ? this.bind(s.event, function(t) {
      var n = e([ t.target, t.target.parentNode ]).filter(o)[0];
      n && r(t, n, s);
    }) : this.find("a,area").filter(o).bind(s.event, function(e) {
      r(e, this, s);
    }).end().end();
  };
})(jQuery);

(function(e) {
  function n(e) {
    return typeof e == "object" ? e : {
      top: e,
      left: e
    };
  }
  var t = e.scrollTo = function(t, n, r) {
    e(window).scrollTo(t, n, r);
  };
  t.defaults = {
    axis: "xy",
    duration: parseFloat(e.fn.jquery) >= 1.3 ? 0 : 1
  };
  t.window = function(t) {
    return e(window)._scrollable();
  };
  e.fn._scrollable = function() {
    return this.map(function() {
      var t = this, n = !t.nodeName || e.inArray(t.nodeName.toLowerCase(), [ "iframe", "#document", "html", "body" ]) != -1;
      if (!n) return t;
      var r = (t.contentWindow || t).document || t.ownerDocument || t;
      return e.browser.safari || r.compatMode == "BackCompat" ? r.body : r.documentElement;
    });
  };
  e.fn.scrollTo = function(r, i, s) {
    if (typeof i == "object") {
      s = i;
      i = 0;
    }
    typeof s == "function" && (s = {
      onAfter: s
    });
    r == "max" && (r = 9e9);
    s = e.extend({}, t.defaults, s);
    i = i || s.speed || s.duration;
    s.queue = s.queue && s.axis.length > 1;
    s.queue && (i /= 2);
    s.offset = n(s.offset);
    s.over = n(s.over);
    return this._scrollable().each(function() {
      function h(e) {
        u.animate(l, i, s.easing, e && function() {
          e.call(this, r, s);
        });
      }
      var o = this, u = e(o), a = r, f, l = {}, c = u.is("html,body");
      switch (typeof a) {
       case "number":
       case "string":
        if (/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(a)) {
          a = n(a);
          break;
        }
        a = e(a, this);
       case "object":
        if (a.is || a.style) f = (a = e(a)).offset();
      }
      e.each(s.axis.split(""), function(e, n) {
        var r = n == "x" ? "Left" : "Top", i = r.toLowerCase(), p = "scroll" + r, d = o[p], v = t.max(o, n);
        if (f) {
          l[p] = f[i] + (c ? 0 : d - u.offset()[i]);
          if (s.margin) {
            l[p] -= parseInt(a.css("margin" + r)) || 0;
            l[p] -= parseInt(a.css("border" + r + "Width")) || 0;
          }
          l[p] += s.offset[i] || 0;
          s.over[i] && (l[p] += a[n == "x" ? "width" : "height"]() * s.over[i]);
        } else {
          var m = a[i];
          l[p] = m.slice && m.slice(-1) == "%" ? parseFloat(m) / 100 * v : m;
        }
        /^\d+$/.test(l[p]) && (l[p] = l[p] <= 0 ? 0 : Math.min(l[p], v));
        if (!e && s.queue) {
          d != l[p] && h(s.onAfterFirst);
          delete l[p];
        }
      });
      h(s.onAfter);
    }).end();
  };
  t.max = function(t, n) {
    var r = n == "x" ? "Width" : "Height", i = "scroll" + r;
    if (!e(t).is("html,body")) return t[i] - e(t)[r.toLowerCase()]();
    var s = "client" + r, o = t.ownerDocument.documentElement, u = t.ownerDocument.body;
    return Math.max(o[i], u[i]) - Math.min(o[s], u[s]);
  };
})(jQuery);